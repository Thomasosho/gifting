jQuery(function(i){var r=function(a,t,n){fragments=n.fragments,cart_hash=n.cart_has,fragments&&i.each(fragments,function(a,t){i(a).addClass("updating")}),i(".shop_table.cart, .updating, .cart_totals").fadeTo("400","0.6").block({message:null,overlayCSS:{opacity:.6}}),a.addClass("added"),fragments&&i.each(fragments,function(a,t){i(a).replaceWith(t)}),i(".widget_shopping_cart, .updating").stop(!0).css("opacity","1").unblock(),i(".shop_table.cart").load(t+" .shop_table.cart:eq(0) > *",function(){i(".shop_table.cart").stop(!0).css("opacity","1").unblock(),i("body").trigger("cart_page_refreshed")}),i(".cart_totals").load(t+" .cart_totals:eq(0) > *",function(){i(".cart_totals").stop(!0).css("opacity","1").unblock()})};i(document).on("click",".ywcds_submit_widget.ywcds_ajax_add_donation",function(a){var t=i(this),n=t.parents("#ywcds_add_donation_form");n.find(".ywcds_amount").val();return a.preventDefault(),function(e,a){a=a.serializeFormJSON();a.add_donation_to_cart=-1,a.action=yith_wcds_frontend_l10n.actions.add_donation_to_cart;var o=e.parents(".ywcds_form_container");i.ajax({type:"GET",url:yith_wcds_frontend_l10n.ajax_url,data:a,dataType:"json",beforeSend:function(){o.find(".ajax-loading").css("visibility","visible")},complete:function(){o.find(".ajax-loading").css("visibility","hidden")},success:function(a){var t=(t=window.location.toString()).replace("add-to-cart","added-to-cart"),n=o.find(".ywcds_message");a.fragments?(r(e,t,a),n.removeClass("woocommerce-error"),"undefined"!=typeof ywcds_params&&"undefined"!=typeof ywcds_params.donation_in_cart&&(ywcds_params.donation_in_cart=1),t="",wc_add_to_cart_params.is_cart||e.parent().find(".added_to_cart").length||(t=' <a href="'+wc_add_to_cart_params.cart_url+'" class="added_to_cart wc-forward" title="'+wc_add_to_cart_params.i18n_view_cart+'">'+wc_add_to_cart_params.i18n_view_cart+"</a>"),n.html(yith_wcds_frontend_l10n.messages.success+t),yith_wcds_frontend_l10n.redirect_after_add_to_cart&&window.location.replace(yith_wcds_frontend_l10n.redirect_after_add_to_cart)):(a.result,a=a.message,o.find(".ywcds_amount").css("border","1px solid red"),n.addClass("woocommerce-error"),n.html(a)),n.show()}})}(t,n),!1}),i(document).on("click",".single_add_to_cart_button",function(a){i(this);var t=i(document).find("#ywcds_add_donation_form_single_product"),n=t.find(".ywcds_amount_single_product"),e=t.data("donation_is_obligatory"),o=t.data("min_donation"),r=t.data("max_donation"),s=i(document).find(".woocommerce-breadcrumb"),d='<div class="woocommerce-error">';if(t.length){i(".woocommerce-error, .woocommerce-message").remove();e=c(n.val(),o,r,e);if("ok"!=e){switch(e){case"nan":d+=yith_wcds_frontend_l10n.messages.no_number+"</div>";break;case"less_zero":d+=yith_wcds_frontend_l10n.messages.negative+"</div>";break;case"empty":d+=yith_wcds_frontend_l10n.messages.obligatory+"</div>";break;case"min":d+=yith_wcds_frontend_l10n.messages.min_don+"</div>";break;case"max":d+=yith_wcds_frontend_l10n.messages.max_don+"</div>"}return s.after(d),i(document).scrollTop(0),a.preventDefault(),i(document).trigger("ywcds_error_value",[i(this)]),!1}}});var c=function(a,t,n,e){var o=new RegExp("[^-0-9%\\"+yith_wcds_frontend_l10n.mon_decimal_point+"]+","gi"),o=a.replace(o,"");if(a!==o)return"nan";if(""==a&&e)return"empty";if(o=o.replace(yith_wcds_frontend_l10n.mon_decimal_point,"."),(a=parseFloat(o))<0)return"less_zero";if(""!=a){if(""!=t&&(t=""+t+"".replace(yith_wcds_frontend_l10n.mon_decimal_point,"."),a<(t=parseFloat(t))))return"min";if(""!=n&&(n=""+n+"".replace(yith_wcds_frontend_l10n.mon_decimal_point,"."),(n=parseFloat(n))<a))return"max"}return"ok"};i(document).on("click",".ywcdp_single_amount",function(a){var t;t=(i(this).is("input:radio")?i(this):i(this).find("input")).val(),i(this).parents("#ywcds_add_donation_form").find(".ywcds_amount").val(t)}),i.fn.serializeFormJSON=function(){var a={},t=this.serializeArray();return i.each(t,function(){a[this.name]?(a[this.name].push||(a[this.name]=[a[this.name]]),a[this.name].push(this.value||"")):a[this.name]=this.value||""}),a}});